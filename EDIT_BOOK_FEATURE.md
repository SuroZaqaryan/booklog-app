# Функционал редактирования книги

## Описание
Реализован полный функционал редактирования существующих книг в библиотеке.

## Реализованные изменения

### Backend
Уже существует эндпоинт для обновления книги:
- `PUT /book/{book_id}` - обновление книги по ID

### Frontend

#### 1. Новые типы данных (`frontend/src/types/book.ts`)
- `BookUpdate` - интерфейс для обновления книги (все поля опциональные)

#### 2. API сервис (`frontend/src/services/api/bookService.ts`)
- `updateBook(bookId, book)` - метод для отправки PUT запроса на обновление книги

#### 3. Новые компоненты

**EditBookDialog** (`frontend/src/components/EditBookDialog.tsx`)
- Модальное окно для редактирования книги
- Принимает текущую книгу и список жанров
- Управляет состоянием открытия/закрытия диалога

**EditBookForm** (`frontend/src/components/EditBookForm.tsx`)
- Форма редактирования с полями:
  - Название книги (обязательное)
  - Автор
  - Жанр (с поддержкой выбора из списка или ввода своего)
  - Статус чтения
- Предзаполнение полей текущими значениями книги
- Поддержка кастомных жанров (не из списка)

#### 4. Обновленные компоненты

**BookCard** (`frontend/src/components/BookCard.tsx`)
- Добавлена кнопка "Редактировать" с иконкой карандаша
- Новый prop `onEdit` для обработки клика по кнопке редактирования
- Кнопки расположены рядом (Редактировать | Удалить)

**BookList** (`frontend/src/components/BookList.tsx`)
- Добавлен prop `onEditBook` для передачи обработчика редактирования
- Передача обработчика в компонент BookCard

**HomePage** (`frontend/src/pages/HomePage.tsx`)
- Импорт `EditBookDialog` и типа `Book`
- Состояние `editingBook` для отслеживания редактируемой книги
- Обработчик `handleEditBook` - открывает диалог редактирования
- Обработчик `handleUpdateBook` - отправляет обновленные данные
- Условный рендеринг диалога редактирования

#### 5. Хук useBooks (`frontend/src/hooks/useBooks.ts`)
- Добавлен метод `updateBook(bookId, bookData)`:
  - Отправляет запрос на обновление через API
  - Обновляет состояние списка книг
  - Добавляет новый жанр в список, если он уникальный
- Экспорт `updateBook` в возвращаемом объекте

## Использование

1. Откройте страницу с библиотекой книг
2. На карточке любой книги нажмите кнопку "Редактировать"
3. В открывшемся диалоге отредактируйте нужные поля
4. Нажмите "Сохранить изменения" или "Отмена"
5. Изменения сразу отобразятся в списке книг

## Особенности

- Все поля формы редактирования опциональны (кроме названия)
- Поддержка выбора жанра из существующих или ввода своего
- Форма предзаполняется текущими значениями книги
- Валидация на стороне клиента
- Обработка ошибок с отображением сообщений пользователю
- Автоматическое закрытие диалога после успешного обновления

## API

**Запрос:**
```http
PUT /book/{book_id}
Content-Type: application/json

{
  "name": "Обновленное название",
  "author": "Новый автор",
  "genre": "Новый жанр",
  "status": "reading"
}
```

**Ответ:**
```json
{
  "id": 1,
  "name": "Обновленное название",
  "author": "Новый автор",
  "genre": "Новый жанр",
  "status": "reading",
  "image_url": "uploads/images/..."
}
```

## Технические детали

- Используется React hooks для управления состоянием
- Компоненты следуют паттерну container/presentational
- Типизация TypeScript для всех props и данных
- Переиспользование существующих UI компонентов (retroui)
- Консистентный стиль с формой добавления книги

