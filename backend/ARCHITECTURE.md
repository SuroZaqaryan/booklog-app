# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend v2.0

## üìÅ –ù–æ–≤–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ alembic/                    # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ versions/              # –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ env.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îÇ
‚îú‚îÄ‚îÄ src/                       # –ì–ª–∞–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ books/                # –ú–æ–¥—É–ª—å –∫–Ω–∏–≥ (Books module)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py      # –≠–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # ORM –º–æ–¥–µ–ª–∏ –∫–Ω–∏–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py       # Pydantic —Å—Ö–µ–º—ã –∫–Ω–∏–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository.py    # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.py       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∫–Ω–∏–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.py        # API endpoints –¥–ª—è –∫–Ω–∏–≥
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ genres/               # –ú–æ–¥—É–ª—å –∂–∞–Ω—Ä–æ–≤ (Genres module)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py        # ORM –º–æ–¥–µ–ª–∏ –∂–∞–Ω—Ä–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/                # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Core)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py     # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.py         # Base –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ common/             # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Common)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ enums.py       # –û–±—â–∏–µ Enums
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ image.py   # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        # –ö–æ—Ä–Ω–µ–≤–æ–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îî‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ uploads/              # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îÇ
‚îú‚îÄ‚îÄ main.py              # Launcher –¥–ª—è uvicorn
‚îú‚îÄ‚îÄ pyproject.toml      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (uv)
‚îú‚îÄ‚îÄ alembic.ini        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îî‚îÄ‚îÄ books.db          # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1. **–í—ã—Å–æ–∫–∞—è –∫–æ–≥–µ–∑–∏—è (High Cohesion)**
–í—Å–µ —Ñ–∞–π–ª—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–¥–Ω–æ–π —Ñ–∏—á–µ–π, –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ:
```
books/
‚îú‚îÄ‚îÄ models.py      # ORM –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ schemas.py     # DTO
‚îú‚îÄ‚îÄ repository.py  # –ë–î
‚îú‚îÄ‚îÄ service.py     # –õ–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ router.py      # API
```

### 2. **–°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å (Low Coupling)**
–ú–æ–¥—É–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞:
- `books` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `genres` —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∂–∞–Ω—Ä–æ–≤
- `core` –∏ `common` - –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –º–æ–¥—É–ª–µ–π
- –õ–µ–≥–∫–æ –≤—ã–¥–µ–ª–∏—Ç—å –º–æ–¥—É–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å

### 3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏:
```bash
src/
‚îú‚îÄ‚îÄ books/          # ‚úÖ –ï—Å—Ç—å
‚îú‚îÄ‚îÄ genres/         # ‚úÖ –ï—Å—Ç—å
‚îú‚îÄ‚îÄ authors/        # üîú –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ!
‚îú‚îÄ‚îÄ reviews/        # üîú –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ!
‚îî‚îÄ‚îÄ users/          # üîú –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ!
```

### 4. **–õ—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ –∫–æ–º–∞–Ω–¥–∞—Ö**
- –ú–µ–Ω—å—à–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ git (—Ä–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏ = —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã)
- –ü—Ä–æ—â–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–¥–∞—á–∏ –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
- –õ–µ–≥—á–µ code review

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Å–ª–µ–¥—É–µ—Ç **—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           router.py                     ‚îÇ  ‚Üê API Layer
‚îÇ  (FastAPI endpoints)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ depends on
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          service.py                     ‚îÇ  ‚Üê Business Logic Layer
‚îÇ  (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ depends on
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        repository.py                    ‚îÇ  ‚Üê Data Access Layer
‚îÇ  (–†–∞–±–æ—Ç–∞ —Å –ë–î)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ uses
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          models.py                      ‚îÇ  ‚Üê ORM Models
‚îÇ  (SQLAlchemy)                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ –º–æ–¥—É–ª–µ

#### 1. `models.py` - ORM –º–æ–¥–µ–ª–∏
```python
from sqlalchemy import Column, Integer, String
from src.core.base import Base

class BookModel(Base):
    __tablename__ = "books"
    id = Column(Integer, primary_key=True)
    name = Column(String, nullable=False)
```

#### 2. `schemas.py` - Pydantic —Å—Ö–µ–º—ã (DTO)
```python
from pydantic import BaseModel

class BookBase(BaseModel):
    name: str

class BookCreate(BookBase):
    pass

class BookPublic(BookBase):
    id: int
```

#### 3. `repository.py` - –†–∞–±–æ—Ç–∞ —Å –ë–î
```python
from sqlalchemy.ext.asyncio import AsyncSession

class BookRepository:
    def __init__(self, db: AsyncSession):
        self.db = db
    
    async def get_all(self) -> List[BookModel]:
        # SQL –∑–∞–ø—Ä–æ—Å—ã
```

#### 4. `service.py` - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```python
class BookService:
    def __init__(self, repository: BookRepository):
        self.repository = repository
    
    async def create_book(self, data: BookCreate):
        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ + –≤—ã–∑–æ–≤ repository
```

#### 5. `router.py` - API endpoints
```python
from fastapi import APIRouter, Depends

router = APIRouter()

@router.get("")
async def get_books(service: BookService = Depends()):
    return await service.get_all_books()
```

#### 6. `__init__.py` - –≠–∫—Å–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª—è
```python
from src.books.models import BookModel
from src.books.schemas import BookCreate, BookPublic
from src.books.router import router

__all__ = ["BookModel", "BookCreate", "BookPublic", "router"]
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Request Flow)

```
1. HTTP Request
   ‚Üì
2. router.py (@router.get)
   ‚Üì
3. service.py (BookService.get_all_books)
   ‚Üì
4. repository.py (BookRepository.get_all)
   ‚Üì
5. models.py (BookModel)
   ‚Üì
6. Database (SQLite)
   ‚Üì
7. schemas.py (BookPublic - —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
   ‚Üì
8. HTTP Response (JSON)
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** (Modularity)
–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å - —ç—Ç–æ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞:
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞–∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å

### 2. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã**

#### Single Responsibility (SRP)
- `repository.py` - —Ç–æ–ª—å–∫–æ –ë–î
- `service.py` - —Ç–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- `router.py` - —Ç–æ–ª—å–∫–æ HTTP

#### Open/Closed (OCP)
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### Dependency Inversion (DIP)
- Service –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Repository —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Router –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Service —á–µ—Ä–µ–∑ Depends()

### 3. **Domain-Driven Design (DDD)**
–ú–æ–¥—É–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ –¥–æ–º–µ–Ω–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º:
- `books` - –≤—Å–µ –æ –∫–Ω–∏–≥–∞—Ö
- `genres` - –≤—Å–µ –æ –∂–∞–Ω—Ä–∞—Ö
- `authors` - –≤—Å–µ –æ–± –∞–≤—Ç–æ—Ä–∞—Ö (–±—É–¥—É—â–µ–µ)

## üì¶ –û–±—â–∏–µ –º–æ–¥—É–ª–∏

### `core/` - –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤—Å–µ–º–∏ –º–æ–¥—É–ª—è–º–∏:
- `config.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `database.py` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- `base.py` - Base –¥–ª—è ORM –º–æ–¥–µ–ª–µ–π

### `common/` - –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `enums.py` - –æ–±—â–∏–µ Enum'—ã
- `utils/` - —É—Ç–∏–ª–∏—Ç—ã (image, validators, etc.)

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å

### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å `authors`

1. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É**
```bash
mkdir src/authors
cd src/authors
```

2. **–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã**
```
src/authors/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ schemas.py
‚îú‚îÄ‚îÄ repository.py
‚îú‚îÄ‚îÄ service.py
‚îî‚îÄ‚îÄ router.py
```

3. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å** (`models.py`)
```python
from sqlalchemy import Column, Integer, String
from src.core.base import Base

class AuthorModel(Base):
    __tablename__ = "authors"
    id = Column(Integer, primary_key=True)
    name = Column(String, nullable=False)
```

4. **–°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã** (`schemas.py`)
```python
class AuthorCreate(BaseModel):
    name: str

class AuthorPublic(BaseModel):
    id: int
    name: str
```

5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Repository** (`repository.py`)
```python
class AuthorRepository:
    async def get_all(self):
        pass
```

6. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Service** (`service.py`)
```python
class AuthorService:
    def __init__(self, repository: AuthorRepository):
        self.repository = repository
```

7. **–°–æ–∑–¥–∞—Ç—å Router** (`router.py`)
```python
router = APIRouter()

@router.get("")
async def get_authors():
    pass
```

8. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –≤ main.py**
```python
from src.authors.router import router as authors_router

app.include_router(
    authors_router, 
    prefix="/api/v1/authors", 
    tags=["authors"]
)
```

9. **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é**
```bash
alembic revision --autogenerate -m "Add authors table"
alembic upgrade head
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ:

```
tests/
‚îú‚îÄ‚îÄ books/
‚îÇ   ‚îú‚îÄ‚îÄ test_repository.py
‚îÇ   ‚îú‚îÄ‚îÄ test_service.py
‚îÇ   ‚îî‚îÄ‚îÄ test_router.py
‚îú‚îÄ‚îÄ genres/
‚îî‚îÄ‚îÄ authors/
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ vs —Å—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ä–∞—è (—Å–ª–æ–µ–≤–∞—è) | –ù–æ–≤–∞—è (–º–æ–¥—É–ª—å–Ω–∞—è) |
|--------|------------------|-------------------|
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚ö†Ô∏è –§–∞–π–ª—ã —Ä–∞—Å—Ç—É—Ç | ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥—É–ª–∏ |
| **–ö–æ–≥–µ–∑–∏—è** | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| **–ù–∞–≤–∏–≥–∞—Ü–∏—è** | ‚ö†Ô∏è 5+ —Ñ–∞–π–ª–æ–≤ | ‚úÖ 1 –ø–∞–ø–∫–∞ |
| **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã git** | ‚ö†Ô∏è –ß–∞—Å—Ç–æ | ‚úÖ –†–µ–¥–∫–æ |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å | ‚úÖ –õ–µ–≥–∫–æ |
| **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å | ‚úÖ –õ–µ–≥–∫–æ |
| **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** | ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –≤—Å—ë | ‚úÖ –ü–æ–Ω—è–ª –º–æ–¥—É–ª—å - —Ä–∞–±–æ—Ç–∞–µ—à—å |

## üìö Best Practices

1. **–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω** - –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –º–æ–¥—É–ª–∏ —Å–ª–∞–±–æ —Å–≤—è–∑–∞–Ω—ã
3. **–Ø–≤–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** - `from src.books.models import BookModel`
4. **–≠–∫—Å–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ `__init__.py`** - —á–∏—Å—Ç—ã–π API –º–æ–¥—É–ª—è
5. **–û–±—â–µ–µ –≤ `common/`** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
6. **Core —Ç–æ–ª—å–∫–æ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –≤–µ—â–µ–π** - config, database, base

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

–°–º. [REFACTORING_SUMMARY.md](REFACTORING_SUMMARY.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üìñ –°—Å—ã–ª–∫–∏

- [FastAPI Best Practices](https://github.com/zhanymkanov/fastapi-best-practices)
- [Clean Architecture in Python](https://www.amazon.com/Clean-Architecture-Craftsmans-Software-Structure/dp/0134494164)
- [Domain-Driven Design](https://martinfowler.com/bliki/DomainDrivenDesign.html)
